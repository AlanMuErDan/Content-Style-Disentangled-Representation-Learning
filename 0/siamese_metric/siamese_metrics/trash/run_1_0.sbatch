#!/bin/bash
#SBATCH --job-name=font_training
#SBATCH --output=logs/font_training_%j.out
#SBATCH --error=logs/font_training_%j.err
#SBATCH --partition=rtx8000
#SBATCH --gres=gpu:rtx8000:1   # å³ä½¿ä¸ç”¨ GPUï¼Œä¹Ÿéœ€è¦æŒ‡å®šï¼Œå¦åˆ™æ— æ³•æäº¤
#SBATCH --cpus-per-task=4
#SBATCH --mem=64G
#SBATCH --time=6:00:00

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p logs

echo "ğŸš€ å¼€å§‹å­—ä½“è®­ç»ƒä»»åŠ¡..."
echo "ğŸ“… å¼€å§‹æ—¶é—´: $(date)"
echo "ğŸ–¥ï¸ èŠ‚ç‚¹ä¿¡æ¯: $(hostname)"
echo "ğŸ’¾ å†…å­˜ä¿¡æ¯:"
free -h
echo "ğŸ¯ GPUä¿¡æ¯:"
nvidia-smi

# æ¿€æ´»condaç¯å¢ƒ
echo "ğŸ”§ æ¿€æ´»condaç¯å¢ƒ..."
conda activate /scratch/gz2199/calli_env

# åˆ‡æ¢åˆ°å·¥ä½œç›®å½•
echo "ğŸ“ åˆ‡æ¢åˆ°å·¥ä½œç›®å½•..."
cd /scratch/gz2199/Content-Style-Disentangled-Representation-Learning

# æ˜¾ç¤ºæ•°æ®æ–‡ä»¶ä¿¡æ¯
echo "ğŸ“Š æ•°æ®æ–‡ä»¶ä¿¡æ¯:"
ls -lh Font-Latent-Full-PT/font_latents_v2.pt

# è¿è¡Œè®­ç»ƒè„šæœ¬
echo "ğŸ¯ å¼€å§‹è¿è¡Œå­—ä½“è®­ç»ƒè„šæœ¬..."
python /scratch/gz2199/Content-Style-Disentangled-Representation-Learning/0/1/0/1.py

# æ˜¾ç¤ºå®Œæˆä¿¡æ¯
echo "âœ… è®­ç»ƒå®Œæˆ!"
echo "ğŸ“… ç»“æŸæ—¶é—´: $(date)"
echo "ğŸ’¾ æœ€ç»ˆå†…å­˜ä½¿ç”¨:"
free -h